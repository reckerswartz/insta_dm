<% content_for :title, "Storage Ingestions" %>

<div class="page">
  <header class="page-header">
    <h1>Active Storage Ingestions</h1>
    <p class="meta">Recent Active Storage records, including the background job responsible for creating each attachment.</p>
  </header>

  <section class="card">
    <div class="actions-row">
      <%= link_to "Jobs Dashboard", admin_background_jobs_path, class: "btn secondary" %>
      <%= link_to "Failure Logs", admin_background_job_failures_path, class: "btn secondary" %>
      <%= link_to "Application Issues", admin_issues_path, class: "btn secondary" %>
    </div>

    <p class="meta mt-2">Use header filters/sorting. Shift + wheel scrolls horizontally, click-drag pans, and attachment updates stream live over ActionCable.</p>

    <div
      class="tabulator-shell"
      data-controller="storage-ingestions-table"
      data-storage-ingestions-table-url-value="<%= admin_storage_ingestions_path(format: :json) %>"
      data-storage-ingestions-table-account-id-value="<%= current_account&.id.to_i %>"
    >
      <div class="tabulator-host" data-storage-ingestions-table-target="table"></div>
    </div>
  </section>
</div>

<% content_for :title, "Storage Ingestions" %>

<div class="page">
  <header class="page-header page-toolbar">
    <div class="page-toolbar-main">
      <h1>Active Storage Ingestions</h1>
      <p class="meta">Recent Active Storage records, including the background job responsible for creating each attachment.</p>
    </div>
    <div class="page-toolbar-actions">
      <%= link_to "Jobs Dashboard", admin_background_jobs_path, class: "btn secondary" %>
      <%= link_to "Failure Logs", admin_background_job_failures_path, class: "btn secondary" %>
      <%= link_to "Application Issues", admin_issues_path, class: "btn secondary" %>
    </div>
  </header>

  <section class="card">
    <div
      class="tabulator-shell"
      data-controller="storage-ingestions-table"
      data-storage-ingestions-table-url-value="<%= admin_storage_ingestions_path(format: :json) %>"
      data-storage-ingestions-table-account-id-value="<%= current_account&.id.to_i %>"
    >
      <%= render "shared/table_meta_bar",
            realtime_note: "Attachment updates stream live over ActionCable." %>
      <div class="tabulator-host" data-storage-ingestions-table-target="table"></div>
    </div>
  </section>
</div>

<% content_for :title, "Application Issues" %>

<div class="page">
  <header class="page-header page-toolbar">
    <div class="page-toolbar-main">
      <h1>Application Issues</h1>
      <p class="meta">Track open, pending, and resolved application-level issues with retry support for linked failed jobs.</p>
    </div>
    <div class="page-toolbar-actions">
      <%= link_to "Jobs Dashboard", admin_background_jobs_path, class: "btn secondary" %>
      <%= link_to "Failure Logs", admin_background_job_failures_path, class: "btn secondary" %>
      <%= link_to "Storage Ingestions", admin_storage_ingestions_path, class: "btn secondary" %>
    </div>
  </header>

  <section class="card">
    <div
      class="tabulator-shell"
      data-controller="issues-table"
      data-issues-table-url-value="<%= admin_issues_path(format: :json) %>"
      data-issues-table-account-id-value="<%= current_account&.id.to_i %>"
    >
      <%= render "shared/table_meta_bar",
            controls: "inline status controls",
            realtime_note: "Updates stream live." %>
      <div class="tabulator-host" data-issues-table-target="table"></div>
    </div>
  </section>
</div>

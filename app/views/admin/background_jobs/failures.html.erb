<% content_for :title, "Job Failure Logs" %>

<div class="page">
  <header class="page-header page-toolbar">
    <div class="page-toolbar-main">
      <h1>Job Failure Logs</h1>
      <p class="meta">Application-level failure records (persisted on exception).</p>
    </div>
    <div class="page-toolbar-actions">
      <%= link_to "Jobs Dashboard", admin_background_jobs_path, class: "btn secondary" %>
      <%= link_to "Application Issues", admin_issues_path, class: "btn secondary" %>
      <%= link_to "Storage Ingestions", admin_storage_ingestions_path, class: "btn secondary" %>
    </div>
  </header>

  <section class="card">
    <div
      class="tabulator-shell"
      data-controller="background-job-failures-table"
      data-background-job-failures-table-url-value="<%= admin_background_job_failures_path(format: :json) %>"
      data-background-job-failures-table-account-id-value="<%= current_account&.id.to_i %>"
    >
      <%= render "shared/table_meta_bar",
            controls: "row retry actions",
            realtime_note: "Updates stream live via ActionCable." %>
      <div class="tabulator-host" data-background-job-failures-table-target="table"></div>
    </div>
  </section>
</div>
